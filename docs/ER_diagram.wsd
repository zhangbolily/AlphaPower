@startuml ER Diagram
' 定义数据表类

class Data_Category {
    +<b><u>id</u></b>: Integer <<PK>>
    +category_id: String
    +name: String
}

class Data_Subcategory {
    +<b><u>id</u></b>: Integer <<PK>>
    +subcategory_id: String
    +name: String
}

class DataSet {
    +<b><u>id</u></b>: Integer <<PK>>
    +dataset_id: String
    +name: String
    +description: String
    +region: String
    +delay: Integer
    +universe: String
    +coverage: Float
    +value_score: Float
    +user_count: Integer
    +alpha_count: Integer
    +field_count: Integer
    +themes: JSON
    +<b><u>category_id</u></b>: Integer <<FK>>
    +<b><u>subcategory_id</u></b>: Integer <<FK>>
}

class DataField {
    +<b><u>id</u></b>: Integer <<PK>>
    +field_id: String
    +description: String
    +region: String
    +delay: Integer
    +universe: String
    +type: String
    +coverage: Float
    +user_count: Integer
    +alpha_count: Integer
    +themes: JSON
    +<b><u>dataset_id</u></b>: Integer <<FK>>
    +<b><u>category_id</u></b>: Integer <<FK>>
    +<b><u>subcategory_id</u></b>: Integer <<FK>>
}

class StatsData {
    +<b><u>id</u></b>: Integer <<PK>>
    +region: String
    +delay: Integer
    +universe: String
    +coverage: Float
    +value_score: Float
    +user_count: Integer
    +alpha_count: Integer
    +field_count: Integer
    +themes: JSON
    +<b><u>data_set_id</u></b>: Integer <<FK>>
    +<b><u>data_field_id</u></b>: Integer <<FK>>
}

class ResearchPaper {
    +<b><u>id</u></b>: Integer <<PK>>
    +type: String
    +title: String
    +url: String
}

' 定义中间表（多对多关联表）
class DataSet_ResearchPaper {
    +<b><u>data_set_id</u></b>: Integer <<FK>>
    +<b><u>research_paper_id</u></b>: Integer <<FK>>
}

' 定义关系

' Data_Category 与 DataSet、DataField 的一对多关系
Data_Category "1" }o-- "0..*" DataSet : contains >
Data_Category "1" }o-- "0..*" DataField : contains >

' Data_Subcategory 与 DataSet、DataField 的一对多关系
Data_Subcategory "1" }o-- "0..*" DataSet : contains >
Data_Subcategory "1" }o-- "0..*" DataField : contains >

' DataSet 与 DataField 的一对多关系
DataSet "1" }o-- "0..*" DataField : has >

' DataSet 与 StatsData 的一对多关系
DataSet "1" }o-- "0..*" StatsData : collects >

' DataField 与 StatsData 的一对多关系
DataField "1" }o-- "0..*" StatsData : generates >

' DataSet 与 ResearchPaper 的多对多关系（通过中间表 DataSet_ResearchPaper）
DataSet "1" }o-- "0..*" DataSet_ResearchPaper : links >
DataSet_ResearchPaper "0..*" }o-- "1" ResearchPaper : links >

' 外键依赖（用依赖箭头表示）
DataSet ||-- Data_Category : category_id
DataSet ||-- Data_Subcategory : subcategory_id
DataField ||-- DataSet : dataset_id
DataField ||-- Data_Category : category_id
DataField ||-- Data_Subcategory : subcategory_id
StatsData ||-- DataSet : data_set_id
StatsData ||-- DataField : data_field_id
DataSet_ResearchPaper ||-- DataSet : data_set_id
DataSet_ResearchPaper ||-- ResearchPaper : research_paper_id

@enduml